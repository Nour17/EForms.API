version: '3.1'

services:
    pgadmin:
        container_name: pgadmin
        environment:
          - PGADMIN_DEFAULT_EMAIL=admin@ileadco.com
          - PGADMIN_DEFAULT_PASSWORD=admin12345
        restart: always
        ports:
            - "5050:80"
        volumes:
          - pgadmin_data:/root/.pgadmin
    
    portainer:
        container_name: portainer
        restart: always
        ports:
          - "8080:8000"
          - "9000:9000"
        volumes:
          - /var/run/docker.sock:/var/run/docker.sock
          - portainer_data:/data

    eformdb:
        container_name: eformdb
        restart: always
        ports: 
            - "27017:27017"
        volumes: 
            - mongo_data: /data/db

    eform.api:
        container_name: eform.api
        environment: 
            - ASPNETCORE_ENVIRONMENT=Development
            - "EFormDatabaseString:ConnectionString=mongodb://eformdb:27017"
        depends_on: 
            - eformdb
        ports: 
            - "8000:80"
        volumes:
            - ${HOME}/.microsoft/usersecrets/:/root/.microsoft/usersecrets
            - ${HOME}/.aspnet/https:/root/.aspnet/https/